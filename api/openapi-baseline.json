{"openapi":"3.1.0","info":{"title":"Revline API","version":"0.1.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","description":"Register a new user account.\n\nArgs:\n    payload: User registration data\n    db: Database session\n    _limiter: Rate limiter dependency\n\nReturns:\n    Created user information\n\nRaises:\n    HTTPException: If email is already registered","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login","description":"Authenticate user and issue tokens.\n\nArgs:\n    payload: Login credentials\n    response: FastAPI response for setting cookies\n    db: Database session\n    r: Redis client for refresh token storage\n    _limiter: Rate limiter dependency\n\nReturns:\n    Access token and metadata\n\nRaises:\n    HTTPException: If credentials are invalid","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLogin"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Login Api V1 Auth Login Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["auth"],"summary":"Me","description":"Get current authenticated user information.\n\nArgs:\n    payload: Decoded JWT token payload\n    db: Database session\n\nReturns:\n    Current user information\n\nRaises:\n    HTTPException: If token is invalid or user not found","operationId":"me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/refresh":{"post":{"tags":["auth"],"summary":"Refresh","description":"Refresh access token using refresh token from cookie.\n\nArgs:\n    request: FastAPI request for reading cookies\n    response: FastAPI response for setting new cookies\n    r: Redis client for token management\n\nReturns:\n    New access token and metadata\n\nRaises:\n    HTTPException: If refresh token is missing or invalid","operationId":"refresh_api_v1_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Refresh Api V1 Auth Refresh Post"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["auth"],"summary":"Logout","description":"Logout user by revoking refresh token and clearing cookie.\n\nArgs:\n    request: FastAPI request for reading cookies\n    response: FastAPI response for clearing cookies\n    r: Redis client for token revocation\n\nReturns:\n    Success status","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Response Logout Api V1 Auth Logout Post"}}}}}}},"/api/v1/customers/":{"get":{"tags":["customers"],"summary":"List Customers","operationId":"list_customers_api_v1_customers__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CustomerOut"},"type":"array","title":"Response List Customers Api V1 Customers  Get"}}}}}},"post":{"tags":["customers"],"summary":"Create Customer","operationId":"create_customer_api_v1_customers__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/vehicles/":{"get":{"tags":["vehicles"],"summary":"List Vehicles","operationId":"list_vehicles_api_v1_vehicles__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/VehicleOut"},"type":"array","title":"Response List Vehicles Api V1 Vehicles  Get"}}}}}},"post":{"tags":["vehicles"],"summary":"Create Vehicle","operationId":"create_vehicle_api_v1_vehicles__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VehicleOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/vehicles/by":{"get":{"tags":["vehicles"],"summary":"Find Vehicle","operationId":"find_vehicle_api_v1_vehicles_by_get","parameters":[{"name":"vin","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Vin"}},{"name":"plate","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plate"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/VehicleOut"},"title":"Response Find Vehicle Api V1 Vehicles By Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ros/active":{"get":{"tags":["ros"],"summary":"Get Active Ros","operationId":"get_active_ros_api_v1_ros_active_get","parameters":[{"name":"owner","in":"query","required":false,"schema":{"anyOf":[{"enum":["advisor","technician","parts","foreman"],"type":"string"},{"type":"null"}],"description":"advisor|technician|parts|foreman","title":"Owner"},"description":"advisor|technician|parts|foreman"},{"name":"waiter","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"filter by waiter=true","title":"Waiter"},"description":"filter by waiter=true"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"search ro#, customer, vehicle","title":"Search"},"description":"search ro#, customer, vehicle"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ActiveRODTO"},"title":"Response Get Active Ros Api V1 Ros Active Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ros/{id}":{"get":{"tags":["ros"],"summary":"Get Ro Detail","operationId":"get_ro_detail_api_v1_ros__id__get","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RODetailDTO"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/search":{"get":{"tags":["search"],"summary":"Search","operationId":"search_api_v1_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":2,"title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stats":{"get":{"tags":["stats"],"summary":"Stats","operationId":"stats_api_v1_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/meta/ro-statuses":{"get":{"tags":["meta"],"summary":"Get Ro Statuses","description":"Return canonical RO statuses (code, label, role_owner, color).","operationId":"get_ro_statuses_api_v1_meta_ro_statuses_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/meta/service-categories":{"get":{"tags":["meta"],"summary":"Get Service Categories","description":"Return dealership service categories (code, label).","operationId":"get_service_categories_api_v1_meta_service_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health":{"get":{"summary":"Health","description":"Simple health check endpoint.","operationId":"health_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Response Health Api V1 Health Get"}}}}}}}},"components":{"schemas":{"ActiveRODTO":{"properties":{"id":{"type":"integer","title":"Id"},"ro_number":{"type":"string","title":"Ro Number"},"customer_name":{"type":"string","title":"Customer Name"},"vehicle_label":{"type":"string","title":"Vehicle Label"},"advisor_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Advisor Name"},"tech_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tech Name"},"opened_at":{"type":"string","format":"date-time","title":"Opened At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"is_waiter":{"type":"boolean","title":"Is Waiter"},"status":{"$ref":"#/components/schemas/ROStatusMeta"}},"type":"object","required":["id","ro_number","customer_name","vehicle_label","advisor_name","tech_name","opened_at","updated_at","is_waiter","status"],"title":"ActiveRODTO"},"CustomerCreate":{"properties":{"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","required":["first_name","last_name"],"title":"CustomerCreate"},"CustomerOut":{"properties":{"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["first_name","last_name","id"],"title":"CustomerOut"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RODetailDTO":{"properties":{"id":{"type":"integer","title":"Id"},"ro_number":{"type":"string","title":"Ro Number"},"customer_name":{"type":"string","title":"Customer Name"},"vehicle_label":{"type":"string","title":"Vehicle Label"},"opened_at":{"type":"string","format":"date-time","title":"Opened At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"is_waiter":{"type":"boolean","title":"Is Waiter"},"status":{"$ref":"#/components/schemas/ROStatusMeta"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["id","ro_number","customer_name","vehicle_label","opened_at","updated_at","is_waiter","status"],"title":"RODetailDTO"},"ROStatusMeta":{"properties":{"status_code":{"type":"string","title":"Status Code"},"label":{"type":"string","title":"Label"},"role_owner":{"type":"string","title":"Role Owner"},"color":{"type":"string","title":"Color"}},"type":"object","required":["status_code","label","role_owner","color"],"title":"ROStatusMeta"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserCreate"},"UserLogin":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserLogin"},"UserOut":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","required":["id","email"],"title":"UserOut"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VehicleCreate":{"properties":{"customer_id":{"type":"integer","title":"Customer Id"},"vin":{"type":"string","title":"Vin"},"plate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plate"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"}},"type":"object","required":["customer_id","vin"],"title":"VehicleCreate"},"VehicleOut":{"properties":{"customer_id":{"type":"integer","title":"Customer Id"},"vin":{"type":"string","title":"Vin"},"plate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Plate"},"year":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Year"},"make":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Make"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["customer_id","vin","id"],"title":"VehicleOut"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}